<? layout("/layouts/form.html",{"module":"role","operate":operate!}){ ?>
  <input type="hidden" id="id" name="role.id" value="${role.id!}">
  <div class="control-group">
    <label class="span2 control-label">${i18n("role.attr.name")}</label>
    <div class="span4">
      <#input type="text" id="name" name="role.name" value="${role.name!}" css="input-xlarge required"/>
    </div>
    <label class="span2 control-label">${i18n("role.attr.code")}</label>
    <div class="span4">
      <#input type="text" id="code" name="role.code" value="${role.code!}" css="input-xlarge required"/>
    </div>
  </div>
  <div class="control-group">
    <label class="span2 control-label">${i18n("common.sort")}</label>
    <div class="span4">
      <#input type="text" id="sort" name="role.sort" value="${role.sort!}" css="input-xlarge digits required"/>
    </div>
  </div>
  <div class="control-group">
    <label class="span2 control-label">${i18n("role.attr.permission")}</label>
    <div class="span10">
      <div class="span12">
        <label class="checkbox inline"><input type="checkbox" id="checkAll" name="checkAll" value="" onclick="checkAll();" class="mr5"/>${i18n("operate.all")}</label>
      </div>
      <? for(item in menuList!){ ?>
      <label class="span2 control-label">${i18n(item.module! + ".module")}</label>
      <div class="span3">
        <? for(p in item.permissions!){ ?>
        <label class="checkbox inline"><input type="checkbox" id="permission" name="permission" value="${item.module!}:${p!}" class="mr5" ${strutil.contain(role.permission!'',item.module!+":"+p!)?'checked':''}>${i18n("operate." + p!)}</label>
        <? } ?>
      </div>
      <? } ?>
    </div>
  </div>
  <script type="text/javascript">
	$(document).ready(function() {
	    $("#dataform").validate({
	    	errorClass: "text-error ml10"
	    });
	});
	function checkAll(){
		if ($(":checkbox").attr("checked") != "checked") {
	        $(":checkbox").attr("checked", "checked");
	    } else {
	        $(":checkbox").removeAttr("checked");
	    }
	}
  </script>
<? } ?>